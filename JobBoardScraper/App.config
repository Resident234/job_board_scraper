<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <appSettings>
    <!-- DatabaseClient Settings -->
    <add key="DatabaseClient:OutputMode" value="Both" />
    
    <!-- BruteForceUsernameScraper Settings -->
    <add key="BruteForce:Enabled" value="false" />
    <add key="BruteForce:BaseUrl" value="http://career.habr.com/" />
    <add key="BruteForce:MinLength" value="5" />
    <add key="BruteForce:MaxLength" value="5" />
    <add key="BruteForce:MaxConcurrentRequests" value="5" />
    <add key="BruteForce:MaxRetries" value="200" />
    <add key="BruteForce:Chars" value="abcdefghijklmnopqrstuvwxyz0123456789-_" />
    <add key="BruteForce:EnableRetry" value="true" />
    <add key="BruteForce:EnableTrafficMeasuring" value="true" />
    
    <!-- CompanyListScraper Settings -->
    <add key="Companies:Enabled" value="false" />
    <add key="Companies:ListUrl" value="https://career.habr.com/companies" />
    <add key="Companies:BaseUrl" value="https://career.habr.com/companies/" />
    <add key="Companies:ItemSelector" value=".companies-item" />
    <add key="Companies:IdAttribute" value="data-company-id" />
    <add key="Companies:LinkSelector" value="a[href^='/companies/']" />
    <add key="Companies:HrefRegex" value="/companies/([a-zA-Z0-9_-]+)" />
    <add key="Companies:NextPageSelector" value="a.page[href*='page={0}']" />
    <add key="Companies:OutputMode" value="Both" />
    <add key="Companies:EnableTrafficMeasuring" value="true" />
    <!-- Перебор всех комбинаций фильтров (sz * category * additional). По умолчанию выключено - много запросов -->
    <add key="Companies:UseFilterCombinations" value="false" />
    
    <!-- CompanyFollowersScraper Settings -->
    <add key="CompanyFollowers:Enabled" value="false" />
    <add key="CompanyFollowers:TimeoutSeconds" value="300" />
    <add key="CompanyFollowers:UrlTemplate" value="https://career.habr.com/companies/{0}/followers" />
    <add key="CompanyFollowers:UserItemSelector" value=".user_friends_item" />
    <add key="CompanyFollowers:UsernameSelector" value=".username" />
    <add key="CompanyFollowers:LinkSelector" value="a" />
    <add key="CompanyFollowers:SloganSelector" value=".specialization" />
    <add key="CompanyFollowers:NextPageSelector" value="a.page[href*='page={0}']" />
    <add key="CompanyFollowers:OutputMode" value="Both" />
    <add key="CompanyFollowers:EnableTrafficMeasuring" value="true" />
    
    <!-- ResumeListPageScraper Settings -->
    <add key="ResumeList:Enabled" value="false" />
    <add key="ResumeList:IntervalMinutes" value="300" />
    <add key="ResumeList:EnableTrafficMeasuring" value="true" />
    <add key="ResumeList:ResumeLinkSelector" value="a.resume-card__title-link" />
    <add key="ResumeList:SkillsEnumerationEnabled" value="true" />
    <add key="ResumeList:SkillsStartId" value="1" />
    <add key="ResumeList:SkillsEndId" value="10000" />
    <add key="ResumeList:OutputMode" value="Both" />
    <add key="ResumeList:PageUrl" value="https://career.habr.com/resumes?order=last_visited" />
    <add key="ResumeList:SkillUrlTemplate" value="https://career.habr.com/resumes?skills[]={0}" />
    <add key="ResumeList:ProfileSectionSelector" value=".base-section" />
    <add key="ResumeList:ProfileLinkSelector" value="a.text-inherit.visited\:text-font-gray" />
    <add key="ResumeList:ExpertIconSelector" value="svg use[xlink\:href*='expert-icon']" />
    <add key="ResumeList:SeparatorSelector" value="span.inline-separator" />
    <add key="ResumeList:SkillsSectionSelector" value="section.grid" />
    <add key="ResumeList:SkillButtonSelector" value="button span" />
    <add key="ResumeList:SalaryRegex" value="От\s+([\d\s]+)\s*₽" />
    <add key="ResumeList:ProfileLinkRegex" value="^(?:https://career\.habr\.com/)?([^/]+)$" />
    <add key="ResumeList:ProfileUrlTemplate" value="https://career.habr.com/{0}" />
    <add key="ResumeList:WorkStatesEnabled" value="true" />
    <add key="ResumeList:WorkStatesUrlTemplate" value="https://career.habr.com/resumes?work_states[]={0}" />
    <add key="ResumeList:WorkStates" value="search,ready,not_search" />
    <add key="ResumeList:ExperiencesEnabled" value="true" />
    <add key="ResumeList:ExperiencesUrlTemplate" value="https://career.habr.com/resumes?experiences[]={0}" />
    <add key="ResumeList:Experiences" value="without,year,three_year,six_year,more_six" />
    <add key="ResumeList:QidsEnabled" value="true" />
    <add key="ResumeList:QidsUrlTemplate" value="https://career.habr.com/resumes?qids[]={0}" />
    <add key="ResumeList:QidsStartId" value="1" />
    <add key="ResumeList:QidsEndId" value="10" />
    <add key="ResumeList:OrderEnabled" value="true" />
    <add key="ResumeList:Orders" value="last_visited,salary_desc,salary_asc" />
    <add key="ResumeList:CompanyIdsEnabled" value="true" />
    <add key="ResumeList:CompanyIdsUrlTemplate" value="https://career.habr.com/resumes?company_ids[]={0}&amp;current_company=1" />
    <add key="ResumeList:CompanyIdsOrders" value="salary_desc,last_visited,relevance,salary_asc" />
    <add key="ResumeList:UniversityIdsEnabled" value="true" />
    <add key="ResumeList:UniversityIdsUrlTemplate" value="https://career.habr.com/resumes?university_ids[]={0}" />
    <add key="ResumeList:UniversityIdsOrders" value="last_visited,salary_desc,salary_asc,relevance" />
    
    <!-- CategoryScraper Settings -->
    <add key="Category:Enabled" value="false" />
    <add key="Category:EnableTrafficMeasuring" value="true" />
    <add key="Category:SelectElementSelector" value="select#category_root_id" />
    <add key="Category:OptionSelector" value="option[value]" />
    
    <!-- ExpertsScraper Settings -->
    <add key="Experts:Enabled" value="false" />
    <add key="Experts:ListUrl" value="https://career.habr.com/experts?order=lastActive" />
    <add key="Experts:TimeoutSeconds" value="600" />
    <add key="Experts:EnableRetry" value="true" />
    <add key="Experts:EnableTrafficMeasuring" value="true" />
    <add key="Experts:OutputMode" value="Both" />
    <add key="Experts:SaveHtml" value="false" />
    <add key="Experts:ExpertCardSelector" value=".expert-card" />
    <add key="Experts:TitleLinkSelector" value="a.expert-card__title-link" />
    <add key="Experts:SpanSelector" value="span" />
    <add key="Experts:CompanyLinkSelector" value="a.link-comp" />
    <add key="Experts:UserCodeRegex" value="^/([^/]+)$" />
    <add key="Experts:CompanyCodeRegex" value="/companies/([^/]+)" />
    
    <!-- CompanyDetailScraper Settings -->
    <add key="CompanyDetail:Enabled" value="false" />
    <add key="CompanyDetail:TimeoutSeconds" value="60" />
    <add key="CompanyDetail:EnableRetry" value="true" />
    <add key="CompanyDetail:EnableTrafficMeasuring" value="true" />
    <add key="CompanyDetail:OutputMode" value="Both" />
    <add key="CompanyDetail:SaveHtml" value="false" />
    <add key="CompanyDetail:FavButtonSelector" value="[id^='company_fav_button_']" />
    <add key="CompanyDetail:CompanyNameSelector" value=".company_name" />
    <add key="CompanyDetail:CompanyNameLinkSelector" value="a" />
    <add key="CompanyDetail:CompanyAboutSelector" value=".company_about" />
    <add key="CompanyDetail:CompanySiteSelector" value=".company_site" />
    <add key="CompanyDetail:CompanySiteLinkSelector" value="a" />
    <add key="CompanyDetail:CompanyRatingSelector" value="span.rating" />
    <add key="CompanyDetail:EmployeesSelector" value="[data-tooltip='Текущие и все сотрудники']" />
    <add key="CompanyDetail:EmployeesCountSelector" value=".count" />
    <add key="CompanyDetail:EmployeesRegex" value="(\d+)\s*/\s*(\d+)" />
    <add key="CompanyDetail:FollowersSelector" value="[data-tooltip='Подписчики и те, кто хочет тут работать']" />
    <add key="CompanyDetail:FollowersCountSelector" value=".count" />
    <add key="CompanyDetail:FollowersRegex" value="(\d+)\s*/\s*(\d+)" />
    <add key="CompanyDetail:EmployeesCountElementSelector" value=".employees" />
    <add key="CompanyDetail:EmployeesCountRegex" value="(\d+)" />
    <add key="CompanyDetail:CompanyIdRegex" value="company_fav_button_(\d+)" />
    <add key="CompanyDetail:AlternativeLinkSelector" value="a.row[href*='company_ids']" />
    <add key="CompanyDetail:AlternativeLinkRegex" value="company_ids%5B%5D=(\d+)" />
    <add key="CompanyDetail:PublicMemberSelector" value="a.company-public-member" />
    <add key="CompanyDetail:PublicMemberNameSelector" value=".company-public-member__name" />
    <add key="CompanyDetail:PublicMemberHrefRegex" value="^/([^/]+)$" />
    <add key="CompanyDetail:PublicMemberBaseUrl" value="https://career.habr.com/" />
    <add key="CompanyDetail:DescriptionSelector" value=".description" />
    <add key="CompanyDetail:SkillsContainerSelector" value=".skills" />
    <add key="CompanyDetail:SkillSelector" value="a.skill" />
    <add key="CompanyDetail:HabrBlogText" value="Ведет блог на «Хабре»" />
    <add key="CompanyDetail:UsersListSelector" value=".company_users_list" />
    <add key="CompanyDetail:UserLinkSelector" value="a.user" />
    <add key="CompanyDetail:UserHrefRegex" value="^/([^/]+)$" />
    <add key="CompanyDetail:UserBaseUrl" value="https://career.habr.com/" />
    <add key="CompanyDetail:InlineCompaniesListSelector" value=".inline_companies_list" />
    <add key="CompanyDetail:CompanyItemSelector" value=".company_item" />
    <add key="CompanyDetail:CompanyTitleLinkSelector" value="a.title" />
    <add key="CompanyDetail:CompanyHrefRegex" value="/companies/([^/]+)" />
    <add key="CompanyDetail:CompanyBaseUrl" value="https://career.habr.com/companies/" />
    
    <!-- UserProfileScraper Settings -->
    <add key="UserProfile:Enabled" value="false" />
    <add key="UserProfile:TimeoutSeconds" value="60" />
    <add key="UserProfile:EnableRetry" value="true" />
    <add key="UserProfile:EnableTrafficMeasuring" value="true" />
    <add key="UserProfile:OutputMode" value="Both" />
    <add key="UserProfile:SaveHtml" value="false" />
    
    <!-- UserFriendsScraper Settings -->
    <add key="UserFriends:Enabled" value="false" />
    <add key="UserFriends:TimeoutSeconds" value="60" />
    <add key="UserFriends:EnableRetry" value="true" />
    <add key="UserFriends:EnableTrafficMeasuring" value="true" />
    <add key="UserFriends:OutputMode" value="Both" />
    <add key="UserFriends:OnlyPublic" value="true" />
    <add key="UserFriends:BaseUrl" value="https://career.habr.com" />
    <add key="UserFriends:FriendLinkSelector" value="a.link-comp.user-list-item__link" />
    
    <!-- UserResumeDetailScraper Settings -->
    <add key="UserResumeDetail:Enabled" value="true" />
    <add key="UserResumeDetail:TimeoutSeconds" value="60" />
    <add key="UserResumeDetail:EnableRetry" value="true" />
    <add key="UserResumeDetail:EnableTrafficMeasuring" value="true" />
    <add key="UserResumeDetail:OutputMode" value="Both" />
    <add key="UserResumeDetail:ContentSelector" value=".content-section.content-section--appearance-resume" />
    <add key="UserResumeDetail:SkillSelector" value=".skills-list-show-item" />
    <add key="UserResumeDetail:ExperienceContainerSelector" value=".resume-job-experience .separated-list" />
    <add key="UserResumeDetail:ExperienceItemSelector" value=".job-experience-item" />
    <add key="UserResumeDetail:CompanyLinkSelector" value="a.link-comp.link-comp--appearance-dark" />
    <add key="UserResumeDetail:CompanyAboutSelector" value=".job-experience-item__subtitle" />
    <add key="UserResumeDetail:PositionSelector" value=".job-position__title" />
    <add key="UserResumeDetail:DurationSelector" value=".job-position__duration" />
    <add key="UserResumeDetail:DescriptionSelector" value=".job-position__message" />
    <add key="UserResumeDetail:TagsSelector" value=".job-position__tags" />
    <add key="UserResumeDetail:CompanyCodeRegex" value="/companies/([^/?]+)" />
    <add key="UserResumeDetail:SkillIdRegex" value="skills%5B%5D=(\d+)" />
    <add key="UserResumeDetail:CompanyUrlTemplate" value="https://career.habr.com/companies/{0}" />
    <add key="UserResumeDetail:CompanySizeUrlPattern" value="/companies?sz=" />
    
    <add key="UserProfile:FriendsUrlTemplate" value="https://career.habr.com/{0}/friends" />
    <add key="UserProfile:PageTitleSelector" value="h1.page-title__title" />
    <add key="UserProfile:ExpertSelector" value=".user-page-sidebar__is-expert" />
    <add key="UserProfile:MetaSelector" value=".user-page-sidebar__meta" />
    <add key="UserProfile:InlineListSelector" value=".inline-list" />
    <add key="UserProfile:CareerSelector" value=".user-page-sidebar__career" />
    <add key="UserProfile:SalaryRegex" value="От\s+([\d\s]+)\s*₽" />
    <add key="UserProfile:BasicSectionSelector" value=".basic-section" />
    <add key="UserProfile:WorkExperienceRegex" value="Опыт работы:&lt;/span&gt;([^&lt;]+)" />
    <add key="UserProfile:LastVisitRegex" value="Последний визит:&lt;/span&gt;([^&lt;]+)" />
    
    <!-- Logging Settings -->
    <add key="Logging:OutputDirectory" value="./logs" />
    
    <!-- Traffic Statistics Settings -->
    <add key="Traffic:OutputFile" value="./logs/traffic_stats.txt" />
    <add key="Traffic:SaveIntervalMinutes" value="5" />
    
    <!-- Database Settings -->
    <add key="Database:ConnectionString" value="Server=localhost:5432;User Id=postgres;Password=admin;Database=jobs;" />
    
    <!-- CompanyRatingScraper Settings -->
    <add key="CompanyRating:Enabled" value="false" />
    <add key="CompanyRating:TimeoutSeconds" value="60" />
    <add key="CompanyRating:EnableRetry" value="true" />
    <add key="CompanyRating:EnableTrafficMeasuring" value="true" />
    <add key="CompanyRating:OutputMode" value="Both" />
    <add key="CompanyRating:SectionSelector" value="article.rating-card" />
    <add key="CompanyRating:TitleLinkSelector" value=".rating-card__company-aside a[href*='/companies/']" />
    <add key="CompanyRating:TitleTextSelector" value="h2.rating-card__company-title-text" />
    <add key="CompanyRating:RatingSelector" value=".rating-card__company-rating span.inline-align" />
    <add key="CompanyRating:DescriptionSelector" value=".rating-card__company-description" />
    <add key="CompanyRating:MetaSelector" value=".rating-card__company-meta" />
    <add key="CompanyRating:CityLinkSelector" value="a[href*='city_id']" />
    <add key="CompanyRating:AwardsSelector" value=".rating-card__company-awards" />
    <add key="CompanyRating:AwardImageSelector" value="img[alt]" />
    <add key="CompanyRating:ScoresSelector" value=".rating-card__scores-value" />
    <add key="CompanyRating:ReviewSelector" value=".rating-card__review-message" />
    <add key="CompanyRating:BaseUrl" value="https://career.habr.com/companies/ratings" />
    <add key="CompanyRating:CompanyUrlTemplate" value="https://career.habr.com/companies/{0}" />
    <add key="CompanyRating:CompanyPathPrefix" value="companies/" />
    
    <!-- Proxy Settings -->
    <add key="Proxy:Enabled" value="false" />
    <add key="Proxy:List" value="" />
    <!-- Пример: http://proxy1:8080;http://user:pass@proxy2:8080;socks5://proxy3:1080 -->
    <!-- Если список пуст, прокси будут загружены автоматически из публичных источников -->
    <add key="Proxy:RotationIntervalSeconds" value="0" />
    <add key="Proxy:AutoRotate" value="false" />
    
    <!-- Valid Level Titles (для валидации уровней при записи в habr_levels) -->
    <add key="Levels:ValidTitles" value="Стажёр (Intern),Младший (Junior),Средний (Middle),Старший (Senior),Ведущий (Lead),Стажёр,Младший,Средний,Старший,Ведущий,Intern,Junior,Middle,Senior,Lead" />
    
    <!-- Free Proxy Rotation Settings -->
    <add key="FreeProxy:Enabled" value="true" />
    <add key="FreeProxy:RefreshIntervalMinutes" value="10" />
    <add key="FreeProxy:PoolMaxSize" value="1000" />
    <add key="FreeProxy:ListUrl" value="https://free-proxy-list.net/ru/" />
    <add key="FreeProxy:ProxyScrapeApiUrl" value="https://api.proxyscrape.com/v4/free-proxy-list/get?request=displayproxies&amp;protocol=http&amp;timeout=10000&amp;country=all&amp;ssl=all&amp;anonymity=all&amp;skip=0&amp;limit=2000" />
    <add key="FreeProxy:ProxyScrapeEnabled" value="true" />
    <add key="FreeProxy:WaitTimeoutSeconds" value="30" />
    <add key="FreeProxy:RequestTimeoutSeconds" value="420" />
    <!-- Таймаут для HTTP-запросов через прокси -->
    <add key="FreeProxy:MaxRetries" value="30" />
    <!-- Максимальное количество попыток с разными прокси при ошибке -->
    
    <!-- Proxy Whitelist Settings -->
    <add key="ProxyWhitelist:Enabled" value="true" />
    <add key="ProxyWhitelist:StorageType" value="file" />
    <!-- file или database -->
    <add key="ProxyWhitelist:FilePath" value="./data/proxy_whitelist.json" />
    <add key="ProxyWhitelist:CooldownHours" value="24" />
    <add key="ProxyWhitelist:RecheckIntervalMinutes" value="60" />
    <add key="ProxyWhitelist:MaxRetryAttempts" value="5" />
    <add key="ProxyWhitelist:DailyLimitMessage" value="Вы исчерпали суточный лимит на просмотр профилей специалистов" />
    <add key="ProxyWhitelist:AutosaveIntervalMinutes" value="20" />
  </appSettings>
</configuration>
